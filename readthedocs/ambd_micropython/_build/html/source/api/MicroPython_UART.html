

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>UART &mdash; amebaDocs 0.0.1 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> amebaDocs
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">UART</a></li>
</ul>
</div>
            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">amebaDocs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>UART</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/source/api/MicroPython_UART.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="uart">
<h1>UART<a class="headerlink" href="#uart" title="Permalink to this headline">¶</a></h1>
<p><strong>class UART – Universal Asynchronous Receiver/Transmitter</strong></p>
<p><strong>Examples</strong></p>
<ul class="simple">
<li><p><strong>UART send and recv</strong></p></li>
</ul>
<p>Materials:</p>
<ul class="simple">
<li><p>Ameba x 1</p></li>
<li><p>TTL USB to Serial module x 1</p></li>
</ul>
<blockquote>
<div><p>Steps:</p>
<p>UART is a very versatile communication protocol and almost an
essential part of a microcontroller. A TTL USB to Serial module is an
IC that helps to translate UART signal to USB signal so that we can
see uart log printed on our PC. This module is often found on many
development boards, including ameba. However, the module on Ameba is
reserved for LOG UART and Firmware uploading, that is why we need a
separate module to communicate between ameba and PC.</p>
<p>There are currently 2 sets of UART available to MicroPython users and
they are,</p>
</div></blockquote>
<table class="docutils align-default">
<colgroup>
<col style="width: 29%" />
<col style="width: 36%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Unit</p></th>
<th class="head"><p>TX</p></th>
<th class="head"><p>RX</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>PA_21</p></td>
<td><p>PA_22</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>PA_26</p></td>
<td><p>PA_25</p></td>
</tr>
</tbody>
</table>
<p>Here we are using unit 0 to demonstrate how uart works on ameba.</p>
<p>Connect TTL module to PA_21 and PA_22 as shown below,</p>
<blockquote>
<div><p><a class="reference internal" href="../../_images/imageUART.jpg"><img alt="A picture containing treemap chart Description automatically generated" src="../../_images/imageUART.jpg" style="width: 5.44444in; height: 4.9375in;" /></a></p>
</div></blockquote>
<p>Then, copy and paste the following code line by line into REPL to see
its effect.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">UART</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">uart</span> <span class="o">=</span> <span class="n">UART</span><span class="p">(</span><span class="n">tx</span><span class="o">=</span><span class="s2">&quot;PA_21&quot;</span><span class="p">,</span> <span class="n">rx</span><span class="o">=</span> <span class="s2">&quot;PA_22&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">uart</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">uart</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">uart</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="c1"># read up to 5 bytes</span>
</pre></div>
</div>
<p><strong>Constructors</strong></p>
<p><strong>UART(</strong><em>unit</em>[optional]<em>, baudrate</em>[optional]<em>,
databits</em>[optional]<em>, stopbit</em>[optional]<em>,
paritybit</em>[optional]<em>, timeout</em>[optional]<em>,
tx_pin</em>[required]<em>, rx_pin</em>[required]<strong>)</strong></p>
<p>Create a UART object associated with the given tx and rx pins and
configure it using other parameters. This allows you to then read/write
uart signal on the pins.</p>
<ul class="simple">
<li><p><strong>unit</strong>: The unit ID, either 0 or 3</p></li>
<li><p><strong>baudrate</strong>: 115200 is the recommended baudrate on ameba</p></li>
<li><p><strong>databits</strong>: the number of bits for data bits, usually 7 or 8 bits</p></li>
<li><p><strong>stopbits</strong>: the number of stop bits, usually 1 or 1.5 or 2 bits</p></li>
<li><p><strong>paritybit</strong>: for parity check, usually none, odd or even</p></li>
<li><p><strong>timeout</strong>: how long uart wait before its timeout (in milliseconds)</p></li>
<li><p><strong>tx_pin</strong>: the transmitter pin, connect the rx pin of the receiver</p></li>
<li><p><strong>rx_pin</strong>: the receiver pin, connect to tx pin of the transmitter</p></li>
</ul>
<p>Note: Not all parameters are required, thus MicroPython will assume its
default value once left blank, here are the default values for each
optional parameter,</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 41%" />
<col style="width: 59%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Default Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Unit</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>Baudrate</p></td>
<td><p>115200</p></td>
</tr>
<tr class="row-even"><td><p>Databits</p></td>
<td><p>8</p></td>
</tr>
<tr class="row-odd"><td><p>Stopbits</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>Paritybit</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>Timeout</p></td>
<td><p>10 (ms)</p></td>
</tr>
</tbody>
</table>
<p><strong>Methods</strong></p>
<p><strong>UART.init()</strong></p>
<p>This method initializes and configures the UART.</p>
<p><strong>UART.read(</strong><em>length</em>[optional]<strong>)</strong></p>
<p>This method reads the data received in UART buffer.</p>
<ul class="simple">
<li><p><strong>length:</strong> the length of the data to receive</p></li>
</ul>
<p><strong>UART.readline()</strong></p>
<p>This method is similar to read(), but read a line ending with a newline
character.</p>
<p><strong>UART.write(</strong><em>buffer</em>[require]<strong>)</strong></p>
<p>This method sends the buffer of bytes to the bus and returns the number
of bytes written.</p>
<ul class="simple">
<li><p><strong>buffer</strong>: data buffer that can be a string, an integer or other
data types</p></li>
</ul>
<p><strong>UART.irq_enable(</strong><em>bool</em>[optional]<strong>)</strong></p>
<p>This method works in 2 way:</p>
<ul class="simple">
<li><p>Check the status of uart irq when NOT passing any argument, and it
will return True if irq is enabled, False if disabled</p></li>
<li><p>Enable/disable uart irq handler by passing True or False as bool</p></li>
</ul>
<p><strong>UART.irq_handler(</strong><em>function</em>[required]<strong>)</strong></p>
<p>Passing the python handler to uart irq so that it will be triggered when
an UART event occurs.</p>
<ul class="simple">
<li><p><strong>function:</strong> a function defined in python or a lambda function</p></li>
</ul>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, Simon XI.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>