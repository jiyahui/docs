

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>[RTL8722CSM] [RTL8722DM] BLE – BLE UART Service &mdash; amebaDocs 0.0.1 documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="[RTL8722CSM] [RTL8722DM] BLE – DHT over BLE UART" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20BLE%20%E2%80%93%20DHT%20over%20BLE%20UART.html" />
    <link rel="prev" title="[RTL8722CSM] [RTL8722DM] BLE – BLE UART Client" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20BLE%20%E2%80%93%20BLE%20UART%20Client.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> amebaDocs
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Welcome to amebaDocs’s documentation!</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../getting_started/getting_started.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download/index.html">Download</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Peripherals &amp; Examples</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Basic%20Examples.html">Basic Examples</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="Network%20Examples.html">Network Examples</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20Scan%20available%20WiFi%20hotspots%20in%20the%20surroundings.html">[RTL8722CSM] [RTL8722DM] Scan available WiFi hotspots in the surroundings</a></li>
<li class="toctree-l4"><a class="reference internal" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20Connect%20to%20WiFi.html">[RTL8722CSM] [RTL8722DM] Connect to WiFi</a></li>
<li class="toctree-l4"><a class="reference internal" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20Use%20Ameba%20as%20Server%20to%20communicate%20with%20Client.html">[RTL8722CSM] [RTL8722DM] Use Ameba as Server to communicate with Client</a></li>
<li class="toctree-l4"><a class="reference internal" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20Use%20Ameba%20to%20retrieve%20HTTP%20websites%20from%20the%20internet.html">[RTL8722CSM] [RTL8722DM] Use Ameba to retrieve HTTP websites from the internet</a></li>
<li class="toctree-l4"><a class="reference internal" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20Use%20Ameba%20to%20retrieve%20information%20from%20the%20Internet.html">[RTL8722CSM] [RTL8722DM] Use Ameba to retrieve information from the Internet</a></li>
<li class="toctree-l4"><a class="reference internal" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20Use%20Ameba%20as%20Server%20to%20control%20LED.html">[RTL8722CSM] [RTL8722DM] Use Ameba as Server to control LED</a></li>
<li class="toctree-l4"><a class="reference internal" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20Use%20Ameba%20as%20server%20to%20send%20Ameba%20status.html">[RTL8722CSM] [RTL8722DM] Use Ameba as server to send Ameba status</a></li>
<li class="toctree-l4"><a class="reference internal" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20Use%20Ameba%20as%20UDP%20server.html">[RTL8722CSM] [RTL8722DM] Use Ameba as UDP server</a></li>
<li class="toctree-l4"><a class="reference internal" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20Retrieve%20Universal%20Time%20%28UTC%29%20By%20Ameba.html">[RTL8722CSM] [RTL8722DM] Retrieve Universal Time (UTC) By Ameba</a></li>
<li class="toctree-l4"><a class="reference internal" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20Use%20MQTT%20To%20Upload%20And%20Listen%20To%20Data.html">[RTL8722CSM] [RTL8722DM] Use MQTT To Upload And Listen To Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20Use%20Amazon%20AWS%20IoT%20Shadow%20Service.html">[RTL8722CSM] [RTL8722DM] Use Amazon AWS IoT Shadow Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20Use%20MQTT%20over%20TLS.html">[RTL8722CSM] [RTL8722DM] Use MQTT over TLS</a></li>
<li class="toctree-l4"><a class="reference internal" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20Ameba%20AP%20Mode.html">[RTL8722CSM] [RTL8722DM] Ameba AP Mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20Use%20MDNS%20To%20Let%20Arduino%20IDE%20Find%20Ameba.html">[RTL8722CSM] [RTL8722DM] Use MDNS To Let Arduino IDE Find Ameba</a></li>
<li class="toctree-l4"><a class="reference internal" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20Use%20Firebase%20To%20Push%20Messaging%20Services.html">[RTL8722CSM] [RTL8722DM] Use Firebase To Push Messaging Services</a></li>
<li class="toctree-l4"><a class="reference internal" href="%5BRTL8722CSM%5D%5BRTL8722DM%5D%20Access%20IFTTT%20Via%20Ameba.html">[RTL8722CSM][RTL8722DM] Access IFTTT Via Ameba</a></li>
<li class="toctree-l4"><a class="reference internal" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20Use%20Ameba%20To%20Securely%20Retrieve%20Information%20From%20The%20Internet.html">[RTL8722CSM] [RTL8722DM] Use Ameba To Securely Retrieve Information From The Internet</a></li>
<li class="toctree-l4"><a class="reference internal" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20BLE%20%E2%80%93%20BLE%20Battery%20Service.html">[RTL8722CSM] [RTL8722DM] BLE – BLE Battery Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20BLE%20%E2%80%93%20BLE%20Beacon.html">[RTL8722CSM] [RTL8722DM] BLE – BLE Beacon</a></li>
<li class="toctree-l4"><a class="reference internal" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20BLE%20%E2%80%93%20BLE%20Scan.html">[RTL8722CSM] [RTL8722DM] BLE – BLE Scan</a></li>
<li class="toctree-l4"><a class="reference internal" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20BLE%20%E2%80%93%20Battery%20Client.html">[RTL8722CSM] [RTL8722DM] BLE – Battery Client</a></li>
<li class="toctree-l4"><a class="reference internal" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20BLE%20%E2%80%93%20WiFi%20Configuration%20Service.html">[RTL8722CSM] [RTL8722DM] BLE – WiFi Configuration Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20BLE%20%E2%80%93%20BLE%20UART%20Client.html">[RTL8722CSM] [RTL8722DM] BLE – BLE UART Client</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">[RTL8722CSM] [RTL8722DM] BLE – BLE UART Service</a></li>
<li class="toctree-l4"><a class="reference internal" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20BLE%20%E2%80%93%20DHT%20over%20BLE%20UART.html">[RTL8722CSM] [RTL8722DM] BLE – DHT over BLE UART</a></li>
<li class="toctree-l4"><a class="reference internal" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20BLE%20%E2%80%93%20PWM%20over%20BLE%20UART.html">[RTL8722CSM] [RTL8722DM] BLE – PWM over BLE UART</a></li>
<li class="toctree-l4"><a class="reference internal" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20Approximate%20UDP%20Receive%20Delay.html">[RTL8722CSM] [RTL8722DM] Approximate UDP Receive Delay</a></li>
<li class="toctree-l4"><a class="reference internal" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20Approximate%20UDP%20Receive%20Timeout.html">[RTL8722CSM] [RTL8722DM] Approximate UDP Receive Timeout</a></li>
<li class="toctree-l4"><a class="reference internal" href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20Google%20Cloud%20IoT.html">[RTL8722CSM] [RTL8722DM] Google Cloud IoT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Peripheral%20Examples.html">Peripheral Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="Components%20used.html">Components used</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../board_hdk/index.html">Board HDK</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api_documents/index.html">API Documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../resources/index.html">Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/index.html">Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../index.html#search">Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ambd_micropython/source/index.html">Welcome to amebaDocs’s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ambd_micropython/source/index.html#search">Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ambd_sdk/source/index.html">Welcome to ambd_sdk’s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ambd_sdk/source/index.html#indices-and-tables">Indices and tables</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">amebaDocs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Welcome to amebaDocs’s documentation!</a> &raquo;</li>
        
          <li><a href="index.html">Peripherals &amp; Examples</a> &raquo;</li>
        
          <li><a href="Network%20Examples.html">Network Examples</a> &raquo;</li>
        
      <li>[RTL8722CSM] [RTL8722DM] BLE – BLE UART Service</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/ambd_arduino/source/peripherals_and_examples/[RTL8722CSM] [RTL8722DM] BLE – BLE UART Service.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="rtl8722csm-rtl8722dm-ble-ble-uart-service">
<h1>[RTL8722CSM] [RTL8722DM] BLE – BLE UART Service<a class="headerlink" href="#rtl8722csm-rtl8722dm-ble-ble-uart-service" title="Permalink to this headline">¶</a></h1>
<p>Materials</p>
<ul class="simple">
<li><p>Ameba D [RTL8722 CSM/DM] x 1</p></li>
<li><p>Android / iOS smartphone</p></li>
</ul>
<p>Example</p>
<p><strong>Introduction</strong></p>
<div class="line-block">
<div class="line">With BLE, application data is sent and received using the GATT system.
GATT uses services, characteristics, and attributes to organise data
and control how the data can be read from and written to. The
Bluetooth SIG specification for BLE includes several predefined
services for common applications, but users are free to implement
custom services and characteristics to best fit their data structure
and application needs</div>
<div class="line">In this example, the BLEService and BLECharacteristic classes are used
to implement a custom service for transmitting ASCII characters
similar to regular UART. This custom service is the Nordic UART
Service, which is supported in several smartphone apps.</div>
</div>
<p><strong>Procedure</strong></p>
<div class="line-block">
<div class="line">Ensure that a compatible BLE UART app is installed on your smartphone,
it is available at:</div>
<div class="line">– Google Play Store:</div>
<div class="line"><a class="reference external" href="https://play.google.com/store/apps/details?id=com.adafruit.bluefruit.le.connect">https://play.google.com/store/apps/details?id=com.adafruit.bluefruit.le.connect</a></div>
<div class="line"><a class="reference external" href="https://play.google.com/store/apps/details?id=de.kai_morich.serial_bluetooth_terminal">https://play.google.com/store/apps/details?id=de.kai_morich.serial_bluetooth_terminal</a></div>
</div>
<div class="line-block">
<div class="line">– Apple App Store:</div>
<div class="line"><a class="reference external" href="https://apps.apple.com/us/app/bluefruit-connect/id830125974">https://apps.apple.com/us/app/bluefruit-connect/id830125974</a></div>
</div>
<p>Open the example, “Files” -&gt; “Examples” -&gt; “AmebaBLE” -&gt;
“BLEUartService”.</p>
<a class="reference internal image-reference" href="../../../_images/image19.png"><img alt="1" src="../../../_images/image19.png" style="width: 5.89583in; height: 7.40972in;" /></a>
<div class="line-block">
<div class="line">Upload the code and press the reset button on Ameba once the upload is
finished.</div>
<div class="line">Open the app on your smartphone, scan and connect to the Ameba board
shown as “AMEBA_BLE_DEV” and choose the UART function in the app. Note
that the BLE UART service on the Ameba board will only work with the
UART and Plotter functions in the Bluefruit Connect app, other
functions (Pin I/O, Image Transfer) require other BLE services that
are not included in this example.</div>
</div>
<a class="reference internal image-reference" href="../../../_images/image29.png"><img alt="1" src="../../../_images/image29.png" style="width: 4.16667in; height: 5.99306in;" /></a>
<a class="reference internal image-reference" href="../../../_images/image35.png"><img alt="1" src="../../../_images/image35.png" style="width: 4.16667in; height: 5.99306in;" /></a>
<div class="line-block">
<div class="line">In the UART terminal section of the app, enter a message and click
send. You should see the message appear in the Arduino serial monitor.</div>
<div class="line">In the Arduino serial monitor, enter a message and click send. The
message will appear in the smartphone app.</div>
</div>
<a class="reference internal image-reference" href="../../../_images/image45.png"><img alt="1" src="../../../_images/image45.png" style="width: 4.16667in; height: 5.99306in;" /></a>
<a class="reference internal image-reference" href="../../../_images/image52.png"><img alt="1" src="../../../_images/image52.png" style="width: 6.5in; height: 5.64931in;" /></a>
<p>Code Reference</p>
<div class="line-block">
<div class="line">The BLECharacteristic class is used to create two characteristics, one
for receive (Rx) and one for transmit (Tx), and added to a service
created with the BLEService class.</div>
<div class="line">The required read/write/notify properties are set for each
characteristic using the set__Property() methods, and callback
functions are registered using the set__Callback() methods. The
required buffer size is also set for each characteristic so that it
has enough memory to store a complete string.</div>
<div class="line">When data is written to the receive characteristic, the registered
callback function is called, which prints out the received data as a
string to the serial monitor.</div>
<div class="line">When data is received on the serial port, it is copied into the
transmit characteristic buffer, and the notify() method is used to
inform the connected device of the new data.</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20BLE%20%E2%80%93%20DHT%20over%20BLE%20UART.html" class="btn btn-neutral float-right" title="[RTL8722CSM] [RTL8722DM] BLE – DHT over BLE UART" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="%5BRTL8722CSM%5D%20%5BRTL8722DM%5D%20BLE%20%E2%80%93%20BLE%20UART%20Client.html" class="btn btn-neutral float-left" title="[RTL8722CSM] [RTL8722DM] BLE – BLE UART Client" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, Simon XI.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>